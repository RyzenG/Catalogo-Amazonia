<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Amazonia Concrete</title>
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <div class="admin-header">
        <h1>üõ†Ô∏è Panel de Administraci√≥n - Amazonia Concrete</h1>
        <p>Gestiona tu cat√°logo de productos de forma f√°cil y r√°pida</p>
    </div>

    <div class="admin-container">
        <div class="info-box">
            <strong>üí° Instrucciones:</strong> Configura tu informaci√≥n de contacto, a√±ade o edita productos, y luego genera tu cat√°logo actualizado con el bot√≥n "Generar Cat√°logo".
        </div>

        <div class="admin-grid">
            <!-- Sidebar -->
            <div class="sidebar">
                <h3 class="section-title">Men√∫</h3>
                <button class="btn btn-primary" style="width: 100%" data-section="config">‚öôÔ∏è Configuraci√≥n</button>
                <button class="btn btn-primary" style="width: 100%; margin-top: 0.5rem" data-section="products">üì¶ Productos</button>
                <button class="btn btn-success" style="width: 100%; margin-top: 1rem" data-action="generate-catalog">üì• Generar Cat√°logo</button>
                <button class="btn btn-secondary" style="width: 100%; margin-top: 0.5rem" id="updatePreviewButton">üîÑ Actualizar vista previa</button>
                
                <div style="margin-top: 2rem">
                    <h4 style="margin-bottom: 1rem">Acciones R√°pidas</h4>
                    <button class="btn btn-secondary" style="width: 100%" id="saveDataButton">üíæ Guardar Cambios</button>
                    <button class="btn btn-secondary" style="width: 100%; margin-top: 0.5rem" id="loadDataButton">üìÇ Cargar Datos</button>
                    <button class="btn btn-secondary" style="width: 100%; margin-top: 0.5rem" id="exportDataButton">üì§ Exportar Datos</button>
                    <button class="btn btn-secondary" style="width: 100%; margin-top: 0.5rem" id="importDataButton">üì• Importar Datos</button>
                </div>
            </div>

            <!-- Main Content -->
            <div class="main-content">
                <!-- Configuration Section -->
                <div id="configSection" class="section">
                    <h2 class="section-title">‚öôÔ∏è Configuraci√≥n General</h2>
                    
                    <div class="config-section">
                        <h3 style="margin-bottom: 1rem">Informaci√≥n de Contacto</h3>
                        <div class="two-columns">
                            <div class="form-group">
                                <label>N√∫mero de WhatsApp (con c√≥digo de pa√≠s):</label>
                                <input type="text" id="whatsapp" placeholder="573001234567" value="573000000000">
                            </div>
                            <div class="form-group">
                                <label>Email de contacto:</label>
                                <input type="email" id="email" placeholder="info@amazoniaconcrete.com" value="info@amazoniaconcrete.com">
                            </div>
                            <div class="form-group">
                                <label>Tel√©fono de contacto:</label>
                                <input type="text" id="phone" placeholder="+57 300 123 4567" value="+57 300 000 0000">
                            </div>
                            <div class="form-group">
                                <label>Direcci√≥n (opcional):</label>
                                <input type="text" id="address" placeholder="Calle 123 #45-67, Ciudad">
                            </div>
                        </div>
                    </div>

                    <div class="config-section">
                        <h3 style="margin-bottom: 1rem">Informaci√≥n de la Empresa</h3>
                        <div class="form-group">
                            <label>Nombre de la empresa:</label>
                            <input type="text" id="companyName" value="AMAZONIA CONCRETE">
                        </div>
                        <div class="form-group">
                            <label>Eslogan:</label>
                            <input type="text" id="tagline" value="Naturaleza y Modernidad en Perfecta Armon√≠a">
                        </div>
                        <div class="form-group">
                            <label>Logo de la empresa:</label>
                            <input type="file" id="companyLogo" accept="image/*">
                            <div class="logo-preview" id="companyLogoPreviewWrapper">
                                <img id="companyLogoPreview" alt="Vista previa del logo" src="">
                                <span class="image-placeholder" id="companyLogoPlaceholder">Sin logo seleccionado</span>
                            </div>
                            <button type="button" class="btn btn-secondary" id="removeLogoButton">Quitar logo</button>
                        </div>
                        <div class="form-group">
                            <label>Mensaje del footer:</label>
                            <textarea id="footerMessage">Creando espacios √∫nicos con concreto sostenible</textarea>
                        </div>
                    </div>

                    <button class="btn btn-primary" id="saveConfigButton">Guardar Configuraci√≥n</button>
                </div>

                <!-- Products Section -->
                <div id="productsSection" class="section" style="display: none">
                    <h2 class="section-title">üì¶ Gesti√≥n de Productos</h2>

                    <div class="category-header">
                        <div class="category-tabs" id="categoryTabs"></div>
                        <div class="category-controls">
                            <button class="btn btn-secondary" type="button" id="manageCategoriesButton">‚öôÔ∏è Gestionar categor√≠as</button>
                            <button class="btn btn-primary" type="button" id="openProductModalButton">‚ûï A√±adir Producto</button>
                        </div>
                    </div>

                    <div id="productsList" class="product-list" style="margin-top: 1.5rem">
                        <!-- Products will be loaded here -->
                    </div>
                </div>

                <section id="previewSection" class="preview-section">
                    <h2 class="section-title">üëÄ Vista previa del cat√°logo</h2>
                    <iframe id="catalogPreview" title="Vista previa del cat√°logo"></iframe>
                </section>
            </div>
        </div>

        <!-- Export Section -->
        <div class="export-section">
            <h2 style="margin-bottom: 1rem">¬øListo para actualizar tu cat√°logo?</h2>
            <p style="margin-bottom: 1.5rem">Genera tu cat√°logo actualizado con todos los cambios realizados</p>
            <button class="big-button" data-action="generate-catalog">
                <span>üì•</span> Generar Cat√°logo Actualizado
            </button>
            <div id="statusMessage" class="status-message" style="margin-top: 1rem"></div>
        </div>
    </div>

    <!-- Product Modal -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">A√±adir Producto</h2>
                <button class="close-modal" type="button" id="closeProductModalButton">‚úï</button>
            </div>

            <form id="productForm">
                <input type="hidden" id="productId">
                
                <div class="form-group">
                    <label>Categor√≠a:</label>
                    <select id="productCategory"></select>
                </div>

                <div class="form-group">
                    <label>Nombre del producto:</label>
                    <input type="text" id="productName" required>
                </div>

                <div class="form-group">
                    <label>Descripci√≥n corta:</label>
                    <textarea id="productShortDesc" required></textarea>
                </div>

                <div class="form-group">
                    <label>Descripci√≥n detallada:</label>
                    <textarea id="productLongDesc" rows="4"></textarea>
                </div>

                <div class="form-group">
                    <label>Precio:</label>
                    <input type="text" id="productPrice" placeholder="$45.000 o $85.000/m¬≤">
                </div>

                <div class="form-group">
                    <label>Imagen del producto:</label>
                    <input type="file" id="productImage" accept="image/*">
                    <input type="url" id="productImageUrl" placeholder="https://raw.githubusercontent.com/...">
                    <small style="display: block; margin-top: 0.5rem; color: #555;">Usa enlaces directos de <code>raw.githubusercontent.com</code> para im√°genes alojadas en GitHub.</small>
                    <div class="image-preview" id="productImagePreviewWrapper">
                        <img id="productImagePreview" alt="Vista previa del producto" src="" />
                        <span class="image-placeholder" id="productImagePlaceholder">Sin imagen seleccionada</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>Caracter√≠sticas (etiquetas):</label>
                    <div id="featuresList" class="feature-list"></div>
                    <button type="button" class="btn btn-secondary" id="addFeatureButton">+ A√±adir caracter√≠stica</button>
                </div>

                <div class="form-group">
                    <label>Especificaciones t√©cnicas:</label>
                    <div class="warning-box">
                        Formato: Nombre: Valor (una por l√≠nea)<br>
                        Ejemplo:<br>
                        Material: Concreto reforzado<br>
                        Peso: 8 kg
                    </div>
                    <textarea id="productSpecs" rows="6" placeholder="Material: Concreto reforzado&#10;Dimensiones: 30cm x 25cm&#10;Peso: 8 kg"></textarea>
                </div>

                <div style="display: flex; gap: 1rem; justify-content: flex-end">
                    <button type="button" class="btn btn-secondary" id="cancelProductButton">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar Producto</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Category Modal -->
    <div class="modal" id="categoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Gestionar Categor√≠as</h2>
                <button class="close-modal" type="button" id="closeCategoryModalButton">‚úï</button>
            </div>

            <div class="info-box">
                <strong>Organiza tus categor√≠as:</strong> Cambia los nombres, iconos o descripciones y elimina las categor√≠as que ya no necesites. Los cambios se reflejar√°n autom√°ticamente en la vista previa y en el cat√°logo exportado.
            </div>

            <div id="categoryManagerList" class="category-manager-list"></div>

            <div class="config-section">
                <h3 style="margin-bottom: 1rem">Crear nueva categor√≠a</h3>
                <div class="two-columns">
                    <div class="form-group">
                        <label for="newCategoryName">Nombre</label>
                        <input type="text" id="newCategoryName" placeholder="Ej: Luminarias">
                    </div>
                    <div class="form-group">
                        <label for="newCategoryIcon">Icono</label>
                        <input type="text" id="newCategoryIcon" placeholder="üí°">
                    </div>
                </div>
                <div class="form-group">
                    <label for="newCategoryDescription">Descripci√≥n</label>
                    <textarea id="newCategoryDescription" rows="3" placeholder="Describe brevemente la categor√≠a"></textarea>
                </div>
                <button type="button" class="btn btn-secondary" id="addCategoryButton">‚ûï A√±adir categor√≠a</button>
            </div>

            <div class="category-manager-actions">
                <button type="button" class="btn btn-secondary" id="cancelCategoryButton">Cerrar</button>
                <button type="button" class="btn btn-primary" id="saveCategoryChangesButton">Guardar cambios</button>
            </div>
        </div>
    </div>

    <!-- Import Data Modal -->
    <input type="file" id="importFile" style="display: none" accept=".json">

    <script src="admin.js" defer></script>
</body>
</html>
