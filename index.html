<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMAZONIA CONCRETE - Cat√°logo Digital</title>
    <style>
        

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            background-image: url("https://raw.githubusercontent.com/RyzenG/Catalogo-Amazonia/refs/heads/main/images/fondoprincipal.webp");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            overflow-x: hidden;
        }

        /* Loading Screen */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #294428;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 1s, visibility 1s;
        }

        .loader.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .leaf-spinner {
            width: 80px;
            height: 80px;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Header */
        header {
            background-color: #294428;
            background-image: url("https://raw.githubusercontent.com/RyzenG/Catalogo-Amazonia/refs/heads/main/images/fondocatalogo.webp");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            color: #ffffff;
            padding: 2rem 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(45, 74, 43, 0.10) 0%, transparent 70%);
            animation: float 20s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .header-inner {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
        }

        .header-content {
            text-align: center;
        }

        .logo-container {
            max-width: 140px;
            max-height: 140px;
            background: transparent;
            border: none;
            box-shadow: none;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-container img {
            width: 100%;
            height: auto;
            display: block;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 0.5rem;
            letter-spacing: 3px;
            animation: fadeInDown 1s ease-out;
        }

        .tagline {
            font-size: 1.2rem;
            opacity: 0.9;
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        /* Navigation */
        .nav-container {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            animation: slideDown 0.5s ease-out 0.5s both;
        }

        nav {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem 0.5rem;
        }

        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .catalog-filters {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem 1.5rem;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            align-items: flex-end;
        }

        .filter-field {
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
            flex: 1 1 220px;
        }

        .filter-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: #778975;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .catalog-filters input,
        .catalog-filters select {
            width: 100%;
            padding: 0.65rem 0.9rem;
            border: 1px solid rgba(45, 74, 43, 0.08);
            border-radius: 12px;
            background: #ffffff;
            color: #2d4a2b;
            box-shadow: 0 1px 3px rgba(0,0,0,0.04);
            transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
        }

        .catalog-filters input::placeholder {
            color: #778975;
        }

        .catalog-filters input:focus,
        .catalog-filters select:focus {
            outline: none;
            border-color: #8fa68c;
            box-shadow: 0 0 0 3px rgba(143, 166, 140, 0.15);
            transform: translateY(-1px);
        }

        .catalog-filters select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image:
                linear-gradient(45deg, transparent 50%, #8fa68c 50%),
                linear-gradient(135deg, #8fa68c 50%, transparent 50%);
            background-position:
                calc(100% - 18px) calc(50% - 3px),
                calc(100% - 12px) calc(50% - 3px);
            background-size: 6px 6px, 6px 6px;
            background-repeat: no-repeat;
            padding-right: 2.5rem;
        }

        .nav-btn {
            padding: 0.7rem 1.5rem;
            background: linear-gradient(135deg, #779774 0%, #628360 100%);
            color: #ffffff;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .nav-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(107, 142, 104, 0.28);
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #2b4629 0%, #4d654b 100%);
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        /* Category Sections */
        .category {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .category.active {
            display: block;
        }

        .category-title {
            font-size: 2.5rem;
            color: #2d4a2b;
            margin-bottom: 1rem;
            text-align: center;
            position: relative;
            padding-bottom: 1rem;
        }

        .category-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, transparent, #8fa68c, transparent);
        }

        .category-description {
            text-align: center;
            color: #778975;
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .no-results-message {
            margin: 1.5rem auto 0;
            text-align: center;
            font-size: 1rem;
            color: #778975;
            max-width: 680px;
            padding: 1.5rem;
            border-radius: 16px;
            border: 1px dashed rgba(45, 74, 43, 0.08);
            background: rgba(255,255,255,0.75);
            line-height: 1.6;
            box-shadow: 0 10px 25px rgba(0,0,0,0.06);
        }

        .no-results-message::before {
            content: 'üîç';
            display: block;
            font-size: 1.6rem;
            margin-bottom: 0.5rem;
            opacity: 0.85;
        }

        /* Product Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .product-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(45, 74, 43, 0.12);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(107, 142, 104, 0.12) 0%, rgba(45, 74, 43, 0.12) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .product-card:hover::before {
            opacity: 1;
        }

        .product-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 40px rgba(45, 74, 43, 0.18);
        }

        .product-image {
            width: 100%;
            height: 250px;
            background: linear-gradient(135deg, #e6e6e6 0%, #cecece 100%);
            position: relative;
            overflow: hidden;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .product-image::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: rotate(0deg) translateX(-100%); }
            100% { transform: rotate(0deg) translateX(100%); }
        }

        .product-info {
            padding: 1.5rem;
        }

        .product-name {
            font-size: 1.3rem;
            color: #2d4a2b;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .product-description {
            color: #778975;
            font-size: 0.95rem;
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .product-features {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .feature-tag {
            background: rgba(143, 166, 140, 0.18);
            color: #6b7d69;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.85rem;
        }

        .product-price {
            font-size: 1.5rem;
            color: #668763;
            font-weight: bold;
        }

        .product-actions {
            margin-top: 1.2rem;
            display: flex;
            justify-content: flex-end;
        }

        .product-card__select {
            appearance: none;
            border: none;
            border-radius: 999px;
            background: #8fa68c;
            color: #ffffff;
            font-weight: 600;
            padding: 0.55rem 1.4rem;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
            box-shadow: 0 10px 20px rgba(143, 166, 140, 0.15);
        }

        .product-card__select:hover,
        .product-card__select:focus {
            transform: translateY(-2px);
            box-shadow: 0 14px 28px rgba(143, 166, 140, 0.15);
        }

        .product-card__select:focus-visible {
            outline: 3px solid #8fa68c;
            outline-offset: 2px;
        }

        .product-card__select[aria-pressed="true"] {
            background: linear-gradient(135deg, #294428 0%, #466044 100%);
            box-shadow: 0 8px 18px rgba(143, 166, 140, 0.15);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: slideUp 0.3s ease-out;
        }

        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 40px;
            height: 40px;
            background: rgba(0,0,0,0.1);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .close-modal:hover {
            background: rgba(0,0,0,0.2);
            transform: rotate(90deg);
        }

        .modal-header {
            background: linear-gradient(135deg, #294428 0%, #466044 100%);
            color: #ffffff;
            padding: 2rem;
            border-radius: 20px 20px 0 0;
        }

        .modal-body {
            padding: 2rem;
        }

        .modal-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        @media (max-width: 768px) {
            .modal-grid {
                grid-template-columns: 1fr;
            }
        }

        .modal-image {
            position: relative;
            width: 100%;
            max-height: 320px;
            background: linear-gradient(135deg, #e6e6e6 0%, #cecece 100%);
            border-radius: 10px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-image-frame {
            width: 100%;
            height: 100%;
        }

        .modal-image-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .carousel-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: none;
            background: rgba(0, 0, 0, 0.35);
            color: #fff;
            font-size: 1.6rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.2s, transform 0.2s;
        }

        .carousel-button:hover {
            background: rgba(0, 0, 0, 0.55);
            transform: translateY(-50%) scale(1.05);
        }

        .carousel-button:disabled {
            background: rgba(0, 0, 0, 0.2);
            cursor: default;
            transform: translateY(-50%);
        }

        .carousel-button--prev {
            left: 12px;
        }

        .carousel-button--next {
            right: 12px;
        }

        .carousel-indicators {
            position: absolute;
            bottom: 14px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 0.4rem;
        }

        .carousel-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 255, 255, 0.6);
            cursor: pointer;
            padding: 0;
            transition: background 0.2s, transform 0.2s;
        }

        .carousel-indicator:hover,
        .carousel-indicator:focus {
            background: rgba(255, 255, 255, 0.85);
            outline: none;
            transform: scale(1.05);
        }

        .carousel-indicator.active {
            background: #60805e;
        }

        .modal-details h3 {
            color: #5e7d5c;
            margin-bottom: 1rem;
        }

        .modal-details p {
            color: #778975;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .specs-list {
            list-style: none;
            margin: 1rem 0;
        }

        .specs-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(45, 74, 43, 0.12);
            display: flex;
            justify-content: space-between;
        }

        .cta-section {
            background: rgba(143, 166, 140, 0.12);
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
        }

        .cta-button {
            background: linear-gradient(135deg, #749571 0%, #658562 100%);
            color: #ffffff;
            padding: 1rem 2rem;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.5rem;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(107, 142, 104, 0.30);
        }

        /* Footer */
        footer {
            background: linear-gradient(135deg, #294428 0%, #466044 100%);
            color: #ffffff;
            padding: 3rem 0 2rem;
            margin-top: 4rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            text-align: center;
        }

        .contact-info {
            margin-bottom: 2rem;
        }

        .contact-info h3 {
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 1.5rem 0 1rem;
        }

        .social-link {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: #fff;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .social-link svg {
            width: 1.5rem;
            height: 1.5rem;
        }

        .social-link svg path {
            fill: currentColor;
        }

        .social-link:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.25);
        }

        .social-link--whatsapp {
            background: #25d366;
        }

        .social-link--instagram {
            background: linear-gradient(135deg, #f9ce34 0%, #ee2a7b 50%, #6228d7 100%);
        }

        .social-link--facebook {
            background: #1877f2;
        }

        .social-link--tiktok {
            background: #010101;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 1px, 1px);
            white-space: nowrap;
            border: 0;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-100%);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Selected products panel */
        .selected-products-toggle {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            z-index: 1100;
            background: #8fa68c;
            color: #ffffff;
            border: none;
            border-radius: 999px;
            display: inline-flex;
            align-items: center;
            gap: 0.6rem;
            padding: 0.65rem 1.2rem;
            font-weight: 600;
            box-shadow: 0 18px 35px rgba(143, 166, 140, 0.15);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .selected-products-toggle:hover,
        .selected-products-toggle:focus {
            transform: translateY(-3px);
            box-shadow: 0 22px 40px rgba(143, 166, 140, 0.15);
        }

        .selected-products-toggle:focus-visible {
            outline: 3px solid #ffffff;
            outline-offset: 3px;
        }

        .selected-products-toggle__badge {
            min-width: 1.8rem;
            height: 1.8rem;
            border-radius: 999px;
            background: rgba(0, 0, 0, 0.15);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.95rem;
        }

        .selected-products-panel {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            width: min(420px, calc(100% - 3rem));
            max-height: min(75vh, 520px);
            background: #ffffff;
            border-radius: 18px;
            box-shadow: 0 25px 55px rgba(0,0,0,0.18);
            transform: translateY(calc(100% + 2rem));
            opacity: 0;
            visibility: hidden;
            transition: transform 0.3s ease, opacity 0.3s ease, visibility 0.3s ease;
            display: flex;
            flex-direction: column;
            z-index: 1200;
            border: 1px solid rgba(45, 74, 43, 0.08);
        }

        .selected-products-panel--open {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
        }

        .selected-products-panel:focus {
            outline: none;
            box-shadow: 0 0 0 4px rgba(143, 166, 140, 0.15);
        }

        .selected-products-panel__header {
            padding: 1.1rem 1.4rem 0.9rem;
            border-bottom: 1px solid rgba(45, 74, 43, 0.08);
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .selected-products-panel__title {
            font-size: 1.2rem;
            color: #2d4a2b;
        }

        .selected-products-panel__header-actions {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .selected-products-panel__summary {
            color: #778975;
            font-size: 0.95rem;
        }

        .selected-products-panel__clear {
            margin-left: auto;
            background: transparent;
            border: 1px solid rgba(45, 74, 43, 0.08);
            border-radius: 999px;
            padding: 0.35rem 0.9rem;
            font-size: 0.85rem;
            cursor: pointer;
            transition: background 0.2s ease, color 0.2s ease, border 0.2s ease;
        }

        .selected-products-panel__clear:not(:disabled):hover,
        .selected-products-panel__clear:not(:disabled):focus {
            background: rgba(143, 166, 140, 0.15);
            border-color: #8fa68c;
            color: #2d4a2b;
        }

        .selected-products-panel__clear:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .selected-products-panel__close {
            background: transparent;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0.25rem;
            color: #778975;
        }

        .selected-products-panel__close:hover,
        .selected-products-panel__close:focus {
            color: #2d4a2b;
        }

        .selected-products-panel__body {
            padding: 1rem 1.4rem 1.4rem;
            overflow-y: auto;
            flex: 1 1 auto;
        }

        .selected-products-panel__footer {
            padding: 0.9rem 1.4rem 1.4rem;
            border-top: 1px solid rgba(45, 74, 43, 0.08);
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            background: #ffffff;
        }

        .selected-products-panel__hint {
            margin: 0;
            font-size: 0.9rem;
            color: #778975;
        }

        .selected-products-panel__checkout {
            background: #8fa68c;
            color: #ffffff;
            border: none;
            border-radius: 14px;
            padding: 0.85rem 1.1rem;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;
            box-shadow: 0 18px 35px rgba(143, 166, 140, 0.15);
        }

        .selected-products-panel__checkout:hover,
        .selected-products-panel__checkout:focus {
            transform: translateY(-2px);
            box-shadow: 0 24px 40px rgba(143, 166, 140, 0.15);
        }

        .selected-products-panel__checkout:focus-visible {
            outline: 3px solid #ffffff;
            outline-offset: 2px;
        }

        .selected-products-panel__checkout:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        .selected-products-panel__empty {
            color: #778975;
            font-size: 0.95rem;
        }

        .selected-products-panel__list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .selected-products-item {
            padding: 1rem;
            border-radius: 12px;
            border: 1px solid rgba(45, 74, 43, 0.08);
            background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,1) 100%);
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .selected-products-item__header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .selected-products-item__thumbnail {
            width: 64px;
            height: 64px;
            border-radius: 12px;
            overflow: hidden;
            flex-shrink: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.85) 0%, rgba(255,255,255,1) 100%);
            border: 1px solid rgba(45, 74, 43, 0.08);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .selected-products-item__thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .selected-products-item__thumbnail-fallback {
            font-weight: 600;
            font-size: 1.1rem;
            color: #8fa68c;
        }

        .selected-products-item__name {
            font-weight: 600;
            color: #2d4a2b;
            flex: 1 1 auto;
        }

        .selected-products-item__remove {
            border: none;
            background: transparent;
            color: #778975;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .selected-products-item__remove:hover,
        .selected-products-item__remove:focus {
            color: #8fa68c;
            text-decoration: underline;
        }

        .selected-products-item__fields {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 0.75rem;
        }

        .selected-products-item__field {
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
            font-size: 0.9rem;
            color: #778975;
        }

        .selected-products-item__field input,
        .selected-products-item__field textarea {
            width: 100%;
            border: 1px solid rgba(45, 74, 43, 0.08);
            border-radius: 10px;
            padding: 0.55rem 0.7rem;
            font-family: inherit;
            resize: vertical;
            min-height: 2.3rem;
            transition: border 0.2s ease, box-shadow 0.2s ease;
        }

        .selected-products-item__field input:focus,
        .selected-products-item__field textarea:focus {
            border-color: #8fa68c;
            box-shadow: 0 0 0 3px rgba(143, 166, 140, 0.15);
            outline: none;
        }

        .selected-products-panel[data-empty="true"] .selected-products-panel__list {
            display: none;
        }

        .selected-products-panel[data-empty="false"] .selected-products-panel__empty {
            display: none;
        }

        .selected-products-panel[data-empty="true"] .selected-products-panel__hint {
            display: none;
        }

        @media (max-width: 768px) {
            .selected-products-toggle {
                right: 1rem;
                left: 1rem;
                width: calc(100% - 2rem);
                justify-content: center;
                border-radius: 14px;
            }

            .selected-products-panel {
                right: 1rem;
                left: 1rem;
                width: auto;
                max-width: none;
                max-height: 80vh;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            .header-inner {
                gap: 1.5rem;
            }

            .logo-container {
                max-width: 110px;
                max-height: 110px;
                padding: 0;
                background: transparent;
                border: none;
                box-shadow: none;
            }

            nav {
                padding: 1rem 1.5rem 0.5rem;
            }

            .catalog-filters {
                padding: 0 1.5rem 1.5rem;
                flex-direction: column;
                align-items: stretch;
            }

            .filter-field {
                flex: 1 1 auto;
            }

            .category-title {
                font-size: 1.8rem;
            }

            .products-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loader" id="loader">
        <svg class="leaf-spinner" viewBox="0 0 100 100">
            <path d="M50 20 Q30 40 50 60 Q70 40 50 20" fill="#425c40"/>
            <path d="M50 40 Q30 60 50 80 Q70 60 50 40" fill="#9aaf98"/>
        </svg>
    </div>

    <!-- Header -->
    <header>
        <div class="header-inner">
            
        <div class="logo-container" id="headerLogoContainer" style="">
            <img id="headerLogo" src="https://raw.githubusercontent.com/RyzenG/Catalogo-Amazonia/refs/heads/main/images/logo.webp" alt="Logo de AMAZONIA CONCRETE">
        </div>
            <div class="header-content">
                <h1 id="headerTitle">AMAZONIA CONCRETE</h1>
                <p class="tagline" id="headerTagline">Naturaleza y Modernidad en Perfecta Armon√≠a</p>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <div class="nav-container">
        <nav>
            <div class="nav-buttons" id="navButtons">
                <button class="nav-btn active" data-category="macetas" data-label="ü™¥ Macetas" data-description="Dise√±os √∫nicos inspirados en la naturaleza amaz√≥nica" onclick="showCategory(event, 'macetas')">ü™¥ Macetas</button><button class="nav-btn" data-category="bandejas" data-label="üì¶ bandejas" data-description="Dise√±os √∫nicos inspirados en la naturaleza amaz√≥nica" onclick="showCategory(event, 'bandejas')">üì¶ bandejas</button>
            </div>
        </nav>
        
        <div class="catalog-filters" id="catalogFilters">
            <label class="filter-field" for="catalogSearchInput">
                <span class="filter-label">Buscar</span>
                <input type="search" id="catalogSearchInput" placeholder="Buscar por nombre, descripci√≥n o etiqueta">
            </label>
            <label class="filter-field" for="catalogFeatureFilter"><span class="filter-label">Etiqueta</span><select id="catalogFeatureFilter"><option value="">Todas las etiquetas</option><option value="30 cm x 25 xm">30 cm x 25 xm</option><option value="50 cm x 25 cm">50 cm x 25 cm</option><option value="dgsdgfds">dgsdgfds</option></select></label>
            <label class="filter-field" for="catalogPriceFilter"><span class="filter-label">Precio</span><select id="catalogPriceFilter"><option value="">Todos los precios</option><option value="10000-15000">Hasta COP¬†15.000</option><option value="15000+">Desde COP¬†15.000</option></select></label>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        
        <!-- Macetas Category -->
        <div class="category active" id="macetas">
            <h2 class="category-title">Macetas</h2>
            <p class="category-description">Dise√±os √∫nicos inspirados en la naturaleza amaz√≥nica</p>
            <div class="products-grid">
                <div class="product-card" data-category="macetas" data-product-id="product_1759935117921" data-name="Maceta" data-description="asafasdf ASDADSGDSG" data-features="30 cm x 25 xm" data-price="10000" onclick="openModal('product_1759935117921')">
                    <div class="product-image">
                        <img src="https://raw.githubusercontent.com/RyzenG/Catalogo-Amazonia/refs/heads/main/images/logo.webp" alt="Imagen de Maceta">
                    </div>
                    <div class="product-info">
                        <h3 class="product-name">Maceta</h3>
                        <p class="product-description">asafasdf</p>
                        <div class="product-features"><span class="feature-tag">30 cm x 25 xm</span></div>
                        <p class="product-price">COP¬†10.000</p>
                        <div class="product-actions">
                            <button type="button" class="product-card__select" data-product-id="product_1759935117921" aria-pressed="false" aria-label="Agregar Maceta al carrito">‚ûï A√±adir al carrito</button>
                        </div>
                    </div>
                </div>
                <div class="product-card" data-category="macetas" data-product-id="product_1759935231984" data-name="Maceta 21" data-description="zxfgdsg &lt;zsdfszdf" data-features="dgsdgfds" data-price="10000" onclick="openModal('product_1759935231984')">
                    <div class="product-image">
                        <img src="https://raw.githubusercontent.com/RyzenG/Catalogo-Amazonia/refs/heads/main/images/logo.webp" alt="Imagen de Maceta 21">
                    </div>
                    <div class="product-info">
                        <h3 class="product-name">Maceta 21</h3>
                        <p class="product-description">zxfgdsg</p>
                        <div class="product-features"><span class="feature-tag">dgsdgfds</span></div>
                        <p class="product-price">COP¬†10.000</p>
                        <div class="product-actions">
                            <button type="button" class="product-card__select" data-product-id="product_1759935231984" aria-pressed="false" aria-label="Agregar Maceta 21 al carrito">‚ûï A√±adir al carrito</button>
                        </div>
                    </div>
                </div>
            </div>
            <p class="no-results-message" data-category-empty style="display: none;">No se encontraron productos que coincidan con los filtros seleccionados.</p>
        </div>
        <!-- bandejas Category -->
        <div class="category" id="bandejas">
            <h2 class="category-title">bandejas</h2>
            <p class="category-description">Dise√±os √∫nicos inspirados en la naturaleza amaz√≥nica</p>
            <div class="products-grid">
                <div class="product-card" data-category="bandejas" data-product-id="product_1759935203480" data-name="bandeja 3d " data-description="afszdgdfh dfghsdfsdf" data-features="50 cm x 25 cm" data-price="15000" onclick="openModal('product_1759935203480')">
                    <div class="product-image">
                        <img src="https://raw.githubusercontent.com/RyzenG/Catalogo-Amazonia/refs/heads/main/images/logo.webp" alt="Imagen de bandeja 3d ">
                    </div>
                    <div class="product-info">
                        <h3 class="product-name">bandeja 3d </h3>
                        <p class="product-description">afszdgdfh</p>
                        <div class="product-features"><span class="feature-tag">50 cm x 25 cm</span></div>
                        <p class="product-price">COP¬†15.000</p>
                        <div class="product-actions">
                            <button type="button" class="product-card__select" data-product-id="product_1759935203480" aria-pressed="false" aria-label="Agregar bandeja 3d  al carrito">‚ûï A√±adir al carrito</button>
                        </div>
                    </div>
                </div>
            </div>
            <p class="no-results-message" data-category-empty style="display: none;">No se encontraron productos que coincidan con los filtros seleccionados.</p>
        </div>
        <p class="category-description" id="emptyCatalogMessage" style="display: none; text-align: center;">A√∫n no hay productos publicados. Estamos preparando nuevas colecciones para ti, ¬°vuelve pronto!</p>
    </div>

    
    <button type="button" class="selected-products-toggle" id="selectedPanelToggle" aria-controls="selectedProductsPanel" aria-expanded="false" aria-haspopup="dialog">
        <span class="selected-products-toggle__label">Carrito</span>
        <span class="selected-products-toggle__badge" id="selectedProductsCount" aria-hidden="true">0</span>
    </button>
    <aside class="selected-products-panel" id="selectedProductsPanel" role="region" aria-live="polite" aria-labelledby="selectedProductsTitle" aria-hidden="true" tabindex="-1">
        <div class="selected-products-panel__header">
            <h2 class="selected-products-panel__title" id="selectedProductsTitle">Carrito de compras</h2>
            <div class="selected-products-panel__header-actions">
                <span class="selected-products-panel__summary" id="selectedProductsSummary">Carrito vac√≠o</span>
                <button type="button" class="selected-products-panel__clear" id="clearSelectedProductsButton" disabled>Vaciar carrito</button>
                <button type="button" class="selected-products-panel__close" id="selectedPanelClose" aria-label="Cerrar panel">‚úï</button>
            </div>
        </div>
        <div class="selected-products-panel__body">
            <p class="selected-products-panel__empty" id="selectedProductsEmpty">Tu carrito est√° vac√≠o. Agrega productos para comenzar tu pedido.</p>
            <ul class="selected-products-panel__list" id="selectedProductsList" aria-describedby="selectedProductsTitle"></ul>
        </div>
        <div class="selected-products-panel__footer">
            <p class="selected-products-panel__hint">Revisa los productos seleccionados y finaliza tu compra por WhatsApp.</p>
            <button type="button" class="selected-products-panel__checkout" id="checkoutButton" disabled>Finalizar compra</button>
        </div>
    </aside>

    <!-- Modal -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()">‚úï</button>
            <div class="modal-header">
                <h2 id="modalTitle">T√≠tulo del Producto</h2>
            </div>
            <div class="modal-body">
                <div class="modal-grid">
                    <div class="modal-image">
                        <button class="carousel-button carousel-button--prev" id="modalPrevButton" aria-label="Imagen anterior">‚Äπ</button>
                        <div class="modal-image-frame">
                            <img id="modalImage" src="" alt="Imagen del producto seleccionado">
                        </div>
                        <button class="carousel-button carousel-button--next" id="modalNextButton" aria-label="Imagen siguiente">‚Ä∫</button>
                        <div class="carousel-indicators" id="modalIndicators" role="tablist" aria-label="Selector de imagen del producto"></div>
                    </div>
                    <div class="modal-details">
                        <h3>Descripci√≥n Detallada</h3>
                        <p id="modalDescription">Descripci√≥n del producto.</p>
                        <h3>Especificaciones</h3>
                        <ul class="specs-list" id="modalSpecs">
                            <li><span>Material:</span><span>Concreto reforzado</span></li>
                        </ul>
                    </div>
                </div>
                <div class="cta-section">
                    <h3>¬øInteresado en este producto?</h3>
                    <p>Cont√°ctanos para m√°s informaci√≥n o para realizar tu pedido</p>
                    <button class="cta-button" id="modalWhatsAppButton" onclick="contactWhatsApp()">üí¨ WhatsApp</button><button class="cta-button" id="modalQuoteButton" onclick="requestQuote()">üìã Solicitar Cotizaci√≥n</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="contact-info">
                <h3>AMAZONIA CONCRETE</h3>
                
                <div class="social-links" id="footerSocialLinks" aria-label="Redes sociales" style="">
                    <a id="footerSocialWhatsApp" class="social-link social-link--whatsapp" href="https://wa.me/573004618873" target="_blank" rel="noopener noreferrer" style="">
                        <svg aria-hidden="true" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
                        <span class="sr-only">WhatsApp</span>
                    </a>
                    <a id="footerSocialInstagram" class="social-link social-link--instagram" href="https://www.instagram.com/amazonia_concrete" target="_blank" rel="noopener noreferrer" style="">
                        <svg aria-hidden="true" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"/></svg>
                        <span class="sr-only">Instagram</span>
                    </a>
                    <a id="footerSocialFacebook" class="social-link social-link--facebook" href="#" target="_blank" rel="noopener noreferrer" style="display: none;">
                        <svg aria-hidden="true" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"/></svg>
                        <span class="sr-only">Facebook</span>
                    </a>
                    <a id="footerSocialTiktok" class="social-link social-link--tiktok" href="https://www.tiktok.com/@amazonia_concrete" target="_blank" rel="noopener noreferrer" style="">
                        <svg aria-hidden="true" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg>
                        <span class="sr-only">TikTok</span>
                    </a>
                </div>
                <p>Creando espacios √∫nicos con concreto sostenible</p>
            </div>
            <p style="margin-top: 2rem; opacity: 0.7;">¬© 2025 AMAZONIA CONCRETE - Todos los derechos reservados</p>
        </div>
    </footer>

    <script>
        
        let currentProduct = null;
        let modalProduct = null;
        let modalImages = [];
        let currentImageIndex = 0;
        let searchFilterTimeout = null;
        const productData = {"product_1759935117921":{"title":"Maceta","image":"https://raw.githubusercontent.com/RyzenG/Catalogo-Amazonia/refs/heads/main/images/logo.webp","images":["https://raw.githubusercontent.com/RyzenG/Catalogo-Amazonia/refs/heads/main/images/logo.webp"],"alt":"Imagen de Maceta","description":"ASDADSGDSG","specs":[["Formato","Nombre: Valor (una por l√≠nea)"],["Ejemplo",""],["Material","Concreto reforzado"],["Peso","8 kg"]]},"product_1759935231984":{"title":"Maceta 21","image":"https://raw.githubusercontent.com/RyzenG/Catalogo-Amazonia/refs/heads/main/images/logo.webp","images":["https://raw.githubusercontent.com/RyzenG/Catalogo-Amazonia/refs/heads/main/images/logo.webp"],"alt":"Imagen de Maceta 21","description":"\u003Czsdfszdf","specs":[["Formato","Nombre: Valor (una por l√≠nea)"],["Ejemplo",""],["Material","Concreto reforzado"],["Peso","8 kg"]]},"product_1759935203480":{"title":"bandeja 3d ","image":"https://raw.githubusercontent.com/RyzenG/Catalogo-Amazonia/refs/heads/main/images/logo.webp","images":["https://raw.githubusercontent.com/RyzenG/Catalogo-Amazonia/refs/heads/main/images/logo.webp"],"alt":"Imagen de bandeja 3d ","description":"dfghsdfsdf","specs":[["Formato","Nombre: Valor (una por l√≠nea)"],["Ejemplo",""],["Material","Concreto reforzado"],["Peso","8 kg"]]}};
        const catalogConfig = {"whatsapp":"573004618873","email":"Amazoniaenconcreto@gmail.com","phone":"3004618873","address":"","instagram":"https://www.instagram.com/amazonia_concrete","facebook":"","tiktok":"https://www.tiktok.com/@amazonia_concrete","companyName":"AMAZONIA CONCRETE","tagline":"Naturaleza y Modernidad en Perfecta Armon√≠a","footerMessage":"Creando espacios √∫nicos con concreto sostenible","logoData":"https://raw.githubusercontent.com/RyzenG/Catalogo-Amazonia/refs/heads/main/images/logo.webp","appearance":{"background":"#f5f5f5","header":"#2d4a2b","primary":"#6b8e68","accent":"#8fa68c","text":"#2d4a2b","backgroundImage":"https://raw.githubusercontent.com/RyzenG/Catalogo-Amazonia/refs/heads/main/images/fondoprincipal.webp","headerImage":"https://raw.githubusercontent.com/RyzenG/Catalogo-Amazonia/refs/heads/main/images/fondocatalogo.webp","footerImage":""}};
        const selectionStorageKey = 'amazoniaCatalogSelectedProducts';
        const selectionStorage = getPersistentStorage();
        let selectedProducts = [];

        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animation = 'fadeInUp 0.6s ease-out forwards';
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        window.addEventListener('load', function() {
            setTimeout(() => {
                const loader = document.getElementById('loader');
                if (loader) {
                    loader.classList.add('hidden');
                }
            }, 1500);
        });

        document.addEventListener('DOMContentLoaded', function() {
            applyConfig();
            setupFilters();
            initializeCatalogState();
            filterCatalog();

            setupSelectionPanel();
            attachProductSelectionHandlers();
            restoreSelectionFromStorage();
            renderSelectedProductsList();

            const cards = document.querySelectorAll('.product-card');
            cards.forEach(card => {
                card.style.opacity = '0';
                observer.observe(card);
            });

            const modalElement = document.getElementById('productModal');
            if (modalElement) {
                modalElement.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeModal();
                    }
                });
            }

            const prevButton = document.getElementById('modalPrevButton');
            if (prevButton) {
                prevButton.addEventListener('click', showPrevModalImage);
            }

            const nextButton = document.getElementById('modalNextButton');
            if (nextButton) {
                nextButton.addEventListener('click', showNextModalImage);
            }

            const indicators = document.getElementById('modalIndicators');
            if (indicators) {
                indicators.addEventListener('click', function(event) {
                    const button = event.target.closest('.carousel-indicator');
                    if (!button) {
                        return;
                    }

                    const index = parseInt(button.getAttribute('data-index'), 10);
                    if (!Number.isNaN(index)) {
                        showModalImage(index);
                    }
                });
            }

            updateModalCarouselControls();
        });

        function updateModalImage() {
            const imageElement = document.getElementById('modalImage');

            if (!imageElement) {
                return;
            }

            const product = modalProduct;
            if (!product) {
                imageElement.removeAttribute('src');
                imageElement.alt = 'Imagen del producto seleccionado';
                return;
            }

            const images = Array.isArray(modalImages) ? modalImages : [];
            const hasImages = images.length > 0;

            if (hasImages) {
                const boundedIndex = Math.max(0, Math.min(currentImageIndex, images.length - 1));
                currentImageIndex = boundedIndex;
                imageElement.src = images[currentImageIndex] || '';
            } else {
                currentImageIndex = 0;
                imageElement.src = product.image || '';
            }

            const baseAlt = product.alt || `Imagen de ${product.title}`;
            const altSuffix = hasImages && images.length > 1
                ? ` (${currentImageIndex + 1} de ${images.length})`
                : '';
            imageElement.alt = baseAlt + altSuffix;
        }

        function updateModalCarouselControls() {
            const prevButton = document.getElementById('modalPrevButton');
            const nextButton = document.getElementById('modalNextButton');
            const indicators = document.getElementById('modalIndicators');

            const images = Array.isArray(modalImages) ? modalImages : [];
            const total = images.length;
            const hasMultiple = total > 1;

            if (prevButton) {
                prevButton.style.display = hasMultiple ? 'flex' : 'none';
                prevButton.disabled = currentImageIndex <= 0;
            }

            if (nextButton) {
                nextButton.style.display = hasMultiple ? 'flex' : 'none';
                nextButton.disabled = total === 0 || currentImageIndex >= total - 1;
            }

            if (indicators) {
                if (!hasMultiple) {
                    indicators.innerHTML = '';
                    indicators.style.display = 'none';
                } else {
                    indicators.style.display = 'flex';
                    indicators.innerHTML = images.map((_, index) => {
                        const isActive = index === currentImageIndex;
                        const ariaCurrent = isActive ? ' aria-current="true"' : '';
                        return `<button type="button" class="carousel-indicator${isActive ? ' active' : ''}" data-index="${index}" aria-label="Ver imagen ${index + 1} de ${total}"${ariaCurrent}></button>`;
                    }).join('');
                }
            }
        }

        function showModalImage(index) {
            const images = Array.isArray(modalImages) ? modalImages : [];

            if (!images.length) {
                return;
            }

            const boundedIndex = Math.max(0, Math.min(index, images.length - 1));
            currentImageIndex = boundedIndex;
            updateModalImage();
            updateModalCarouselControls();
        }

        function showPrevModalImage() {
            if (currentImageIndex <= 0) {
                return;
            }

            showModalImage(currentImageIndex - 1);
        }

        function showNextModalImage() {
            const images = Array.isArray(modalImages) ? modalImages : [];

            if (!images.length || currentImageIndex >= images.length - 1) {
                return;
            }

            showModalImage(currentImageIndex + 1);
        }

        function configureFooterLink(element, url) {
            if (!element) {
                return false;
            }

            const normalizedUrl = typeof url === 'string' ? url.trim() : '';
            if (normalizedUrl) {
                element.href = normalizedUrl;
                element.style.display = 'inline-flex';
                return true;
            }

            element.style.display = 'none';
            return false;
        }

        function applyConfig() {
            const config = catalogConfig || {};
            const companyName = config.companyName || '';
            const taglineValue = config.tagline || '';
            const logoData = config.logoData || '';
            const whatsappNumber = (config.whatsapp || '').replace(/\D+/g, '');
            const emailValue = (config.email || '').trim();
            const instagramValue = (config.instagram || '').trim();
            const facebookValue = (config.facebook || '').trim();
            const tiktokValue = (config.tiktok || '').trim();

            document.title = companyName ? `${companyName} - Cat√°logo Digital` : 'Cat√°logo Digital';

            const headerTitle = document.getElementById('headerTitle');
            if (headerTitle) {
                headerTitle.textContent = companyName || 'Cat√°logo Digital';
            }

            const headerTagline = document.getElementById('headerTagline');
            if (headerTagline) {
                if (taglineValue) {
                    headerTagline.textContent = taglineValue;
                    headerTagline.style.display = 'block';
                } else {
                    headerTagline.textContent = '';
                    headerTagline.style.display = 'none';
                }
            }

            const logoContainer = document.getElementById('headerLogoContainer');
            const logoImage = document.getElementById('headerLogo');
            if (logoContainer && logoImage) {
                if (logoData) {
                    logoImage.src = logoData;
                    logoImage.alt = `Logo de ${companyName || 'la empresa'}`;
                    logoContainer.style.display = 'flex';
                } else {
                    logoImage.removeAttribute('src');
                    logoImage.alt = 'Logo de la empresa';
                    logoContainer.style.display = 'none';
                }
            }

            const whatsappButton = document.getElementById('modalWhatsAppButton');
            if (whatsappButton) {
                whatsappButton.style.display = whatsappNumber ? 'inline-block' : 'none';
            }

            const quoteButton = document.getElementById('modalQuoteButton');
            if (quoteButton) {
                quoteButton.style.display = emailValue ? 'inline-block' : 'none';
            }

            const footerSocialContainer = document.getElementById('footerSocialLinks');
            const footerWhatsApp = document.getElementById('footerSocialWhatsApp');
            const footerInstagram = document.getElementById('footerSocialInstagram');
            const footerFacebook = document.getElementById('footerSocialFacebook');
            const footerTiktok = document.getElementById('footerSocialTiktok');

            let hasFooterSocial = false;

            if (footerWhatsApp) {
                if (whatsappNumber) {
                    footerWhatsApp.href = `https://wa.me/${whatsappNumber}`;
                    footerWhatsApp.style.display = 'inline-flex';
                    hasFooterSocial = true;
                } else {
                    footerWhatsApp.style.display = 'none';
                }
            }

            if (configureFooterLink(footerInstagram, instagramValue)) {
                hasFooterSocial = true;
            }

            if (configureFooterLink(footerFacebook, facebookValue)) {
                hasFooterSocial = true;
            }

            if (configureFooterLink(footerTiktok, tiktokValue)) {
                hasFooterSocial = true;
            }

            if (footerSocialContainer) {
                footerSocialContainer.style.display = hasFooterSocial ? '' : 'none';
            }
        }

        function setupFilters() {
            const searchInput = document.getElementById('catalogSearchInput');
            const featureSelect = document.getElementById('catalogFeatureFilter');
            const priceSelect = document.getElementById('catalogPriceFilter');

            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    if (searchFilterTimeout) {
                        window.clearTimeout(searchFilterTimeout);
                    }

                    searchFilterTimeout = window.setTimeout(filterCatalog, 180);
                });
            }

            if (featureSelect) {
                featureSelect.addEventListener('change', filterCatalog);
            }

            if (priceSelect) {
                priceSelect.addEventListener('change', filterCatalog);
            }
        }

        function parsePriceFilter(value) {
            if (typeof value !== 'string' || value.trim().length === 0) {
                return null;
            }

            const trimmed = value.trim();

            if (trimmed.endsWith('+')) {
                const minValue = Number.parseFloat(trimmed.slice(0, -1));
                return Number.isFinite(minValue)
                    ? { min: minValue, max: Infinity }
                    : null;
            }

            const [minPart, maxPart] = trimmed.split('-');
            if (typeof minPart === 'undefined' || typeof maxPart === 'undefined') {
                return null;
            }

            const minValue = Number.parseFloat(minPart);
            const maxValue = Number.parseFloat(maxPart);

            if (!Number.isFinite(minValue) && !Number.isFinite(maxValue)) {
                return null;
            }

            const normalizedMin = Number.isFinite(minValue) ? minValue : 0;
            const normalizedMax = Number.isFinite(maxValue) ? maxValue : Infinity;

            return { min: normalizedMin, max: normalizedMax };
        }

        function filterCatalog() {
            const searchInput = document.getElementById('catalogSearchInput');
            const featureSelect = document.getElementById('catalogFeatureFilter');
            const priceSelect = document.getElementById('catalogPriceFilter');

            const searchTerm = searchInput ? searchInput.value.trim().toLowerCase() : '';
            const featureTerm = featureSelect ? featureSelect.value.trim().toLowerCase() : '';
            const priceFilter = priceSelect ? priceSelect.value.trim() : '';
            const priceRange = parsePriceFilter(priceFilter);
            const searchTokens = searchTerm.length > 0
                ? searchTerm.split(/s+/).filter(Boolean)
                : [];

            const categories = Array.from(document.querySelectorAll('.category'));

            categories.forEach(category => {
                const cards = Array.from(category.querySelectorAll('.product-card'));
                let visibleInCategory = 0;

                cards.forEach(card => {
                    const name = (card.dataset.name || '').toLowerCase();
                    const description = (card.dataset.description || '').toLowerCase();
                    const features = (card.dataset.features || '').toLowerCase();
                    const priceValue = Number.parseFloat(card.dataset.price);

                    const matchesSearch = searchTokens.length === 0
                        ? true
                        : searchTokens.every(token =>
                            [name, description, features].some(field => field.includes(token))
                        );

                    let matchesFeature = true;
                    if (featureTerm) {
                        matchesFeature = features.split('||').some(feature => feature.trim().includes(featureTerm));
                    }

                    let matchesPrice = true;
                    if (priceRange) {
                        if (!Number.isFinite(priceValue)) {
                            matchesPrice = false;
                        } else {
                            const min = Number.isFinite(priceRange.min) ? priceRange.min : 0;
                            const max = Number.isFinite(priceRange.max) ? priceRange.max : Infinity;
                            matchesPrice = priceValue >= min && priceValue <= max;
                        }
                    }

                    const matchesAll = matchesSearch && matchesFeature && matchesPrice;
                    card.style.display = matchesAll ? '' : 'none';

                    if (matchesAll) {
                        visibleInCategory += 1;
                    }
                });

                const emptyMessage = category.querySelector('[data-category-empty]');
                if (emptyMessage) {
                    emptyMessage.style.display = visibleInCategory === 0 ? 'block' : 'none';
                }
            });
        }

        function getPersistentStorage() {
            try {
                if (typeof window === 'undefined') {
                    return null;
                }

                const storage = window.localStorage || window.sessionStorage;
                const testKey = '__amazoniaSelectionTest__';
                storage.setItem(testKey, '1');
                storage.removeItem(testKey);
                return storage;
            } catch (error) {
                console.warn('El almacenamiento local no est√° disponible', error);
                return null;
            }
        }

        function sanitizeQuantity(value) {
            const parsed = Number.parseInt(value, 10);
            return Number.isFinite(parsed) && parsed > 0 ? parsed : 1;
        }

        function sanitizeNotes(value) {
            if (typeof value !== 'string') {
                return '';
            }

            const trimmed = value.trim();
            return trimmed.length > 240 ? trimmed.slice(0, 240) : trimmed;
        }

        function sanitizeSelectionItem(rawItem) {
            if (!rawItem || typeof rawItem !== 'object') {
                return null;
            }

            const productId = typeof rawItem.id === 'string' ? rawItem.id : '';

            if (!productId) {
                return null;
            }

            return {
                id: productId,
                quantity: sanitizeQuantity(rawItem.quantity),
                notes: sanitizeNotes(rawItem.notes)
            };
        }

        function restoreSelectionFromStorage() {
            if (!selectionStorage) {
                selectedProducts = [];
                return;
            }

            try {
                const storedValue = selectionStorage.getItem(selectionStorageKey);

                if (!storedValue) {
                    selectedProducts = [];
                    return;
                }

                const parsed = JSON.parse(storedValue);
                if (!Array.isArray(parsed)) {
                    selectedProducts = [];
                    return;
                }

                const sanitized = parsed
                    .map(sanitizeSelectionItem)
                    .filter(item => item && productData[item.id]);

                selectedProducts = sanitized;
            } catch (error) {
                console.warn('No se pudo restaurar la selecci√≥n de productos', error);
                selectedProducts = [];
            }
        }

        function persistSelection() {
            if (!selectionStorage) {
                return;
            }

            try {
                selectionStorage.setItem(selectionStorageKey, JSON.stringify(selectedProducts));
            } catch (error) {
                console.warn('No se pudo guardar la selecci√≥n de productos', error);
            }
        }

        function setupSelectionPanel() {
            const toggle = document.getElementById('selectedPanelToggle');
            const panel = document.getElementById('selectedProductsPanel');
            const closeButton = document.getElementById('selectedPanelClose');
            const clearButton = document.getElementById('clearSelectedProductsButton');
            const checkoutButton = document.getElementById('checkoutButton');

            if (toggle) {
                toggle.addEventListener('click', function() {
                    const expanded = toggle.getAttribute('aria-expanded') === 'true';
                    if (expanded) {
                        closeSelectionPanel();
                    } else {
                        openSelectionPanel();
                    }
                });
            }

            if (closeButton) {
                closeButton.addEventListener('click', function() {
                    closeSelectionPanel();
                    if (toggle) {
                        toggle.focus();
                    }
                });
            }

            if (panel) {
                panel.addEventListener('keydown', function(event) {
                    if (event.key === 'Escape') {
                        closeSelectionPanel();
                        if (toggle) {
                            toggle.focus();
                        }
                    }
                });
            }

            if (clearButton) {
                clearButton.addEventListener('click', function() {
                    clearSelectedProducts();
                });
            }

            if (checkoutButton) {
                checkoutButton.addEventListener('click', function() {
                    if (checkoutButton.disabled) {
                        return;
                    }

                    closeSelectionPanel();
                    contactWhatsApp();
                });
            }
        }

        function attachProductSelectionHandlers() {
            const buttons = document.querySelectorAll('.product-card__select');

            buttons.forEach(button => {
                const productId = button.getAttribute('data-product-id');

                if (!productId) {
                    return;
                }

                button.addEventListener('click', function(event) {
                    event.stopPropagation();
                    addProductToSelection(productId);
                });
            });
        }

        function addProductToSelection(productId) {
            if (!productId || !productData[productId]) {
                return;
            }

            const existingIndex = selectedProducts.findIndex(item => item.id === productId);

            if (existingIndex >= 0) {
                const existing = selectedProducts[existingIndex];
                const updatedQuantity = sanitizeQuantity((existing && existing.quantity) || 0) + 1;
                selectedProducts.splice(existingIndex, 1, {
                    ...existing,
                    quantity: sanitizeQuantity(updatedQuantity)
                });
            } else {
                selectedProducts.push({ id: productId, quantity: 1, notes: '' });
            }

            persistSelection();
            renderSelectedProductsList();
            openSelectionPanel();
        }

        function removeProductFromSelection(productId) {
            const previousLength = selectedProducts.length;
            selectedProducts = selectedProducts.filter(item => item.id !== productId);

            if (selectedProducts.length !== previousLength) {
                persistSelection();
                renderSelectedProductsList();
            }
        }

        function clearSelectedProducts() {
            if (!selectedProducts.length) {
                return;
            }

            selectedProducts = [];
            persistSelection();
            renderSelectedProductsList();
        }

        function updateSelectionItem(productId, updates, options) {
            const opts = options || {};
            const index = selectedProducts.findIndex(item => item.id === productId);

            if (index === -1) {
                return;
            }

            const current = selectedProducts[index];
            const next = {
                ...current
            };

            if (Object.prototype.hasOwnProperty.call(updates, 'quantity')) {
                next.quantity = sanitizeQuantity(updates.quantity);
            }

            if (Object.prototype.hasOwnProperty.call(updates, 'notes')) {
                next.notes = sanitizeNotes(updates.notes);
            }

            selectedProducts.splice(index, 1, next);
            persistSelection();

            if (opts.reRender) {
                renderSelectedProductsList();
                return;
            }

            if (!opts.skipSummary) {
                updateSelectionSummaryUI();
            }
        }

        function renderSelectedProductsList() {
            const list = document.getElementById('selectedProductsList');
            const filtered = selectedProducts.filter(item => productData[item.id]);

            if (filtered.length !== selectedProducts.length) {
                selectedProducts = filtered;
                persistSelection();
            } else {
                selectedProducts = filtered;
            }

            if (!list) {
                updateSelectionSummaryUI();
                updateProductSelectionButtons();
                return;
            }

            list.innerHTML = '';
            const fragment = document.createDocumentFragment();

            selectedProducts.forEach(item => {
                const product = productData[item.id];

                if (!product) {
                    return;
                }

                const listItem = document.createElement('li');
                listItem.className = 'selected-products-item';
                listItem.setAttribute('data-product-id', item.id);

                const header = document.createElement('div');
                header.className = 'selected-products-item__header';

                const thumbnailContainer = document.createElement('div');
                thumbnailContainer.className = 'selected-products-item__thumbnail';

                const rawImage = typeof product.image === 'string' ? product.image.trim() : '';
                const fallbackSource = typeof product.title === 'string' ? product.title : 'Producto Amazonia';
                const normalizedName = fallbackSource.trim() || 'Producto Amazonia';

                if (rawImage) {
                    const imageElement = document.createElement('img');
                    imageElement.src = rawImage;
                    imageElement.alt = `Miniatura de ${normalizedName}`;
                    thumbnailContainer.appendChild(imageElement);
                } else {
                    const fallback = document.createElement('span');
                    fallback.className = 'selected-products-item__thumbnail-fallback';
                    const fallbackLabel = normalizedName.charAt(0).toUpperCase() || 'A';
                    fallback.textContent = fallbackLabel;
                    thumbnailContainer.appendChild(fallback);
                }

                header.appendChild(thumbnailContainer);

                const nameElement = document.createElement('span');
                nameElement.className = 'selected-products-item__name';
                nameElement.textContent = normalizedName;
                header.appendChild(nameElement);

                const removeButton = document.createElement('button');
                removeButton.type = 'button';
                removeButton.className = 'selected-products-item__remove';
                removeButton.textContent = 'Quitar';
                removeButton.setAttribute('aria-label', `Quitar ${nameElement.textContent} del carrito`);
                removeButton.addEventListener('click', function() {
                    removeProductFromSelection(item.id);
                });
                header.appendChild(removeButton);

                listItem.appendChild(header);

                const fieldsWrapper = document.createElement('div');
                fieldsWrapper.className = 'selected-products-item__fields';

                const quantityField = document.createElement('label');
                quantityField.className = 'selected-products-item__field';

                const quantityLabel = document.createElement('span');
                quantityLabel.textContent = 'Cantidad';
                quantityField.appendChild(quantityLabel);

                const quantityInput = document.createElement('input');
                quantityInput.type = 'number';
                quantityInput.min = '1';
                quantityInput.step = '1';
                quantityInput.inputMode = 'numeric';
                quantityInput.value = sanitizeQuantity(item.quantity).toString();
                quantityInput.addEventListener('change', function() {
                    const value = sanitizeQuantity(quantityInput.value);
                    quantityInput.value = value.toString();
                    updateSelectionItem(item.id, { quantity: value }, { reRender: false });
                });
                quantityInput.addEventListener('blur', function() {
                    const value = sanitizeQuantity(quantityInput.value);
                    quantityInput.value = value.toString();
                    updateSelectionItem(item.id, { quantity: value }, { reRender: false });
                });
                quantityField.appendChild(quantityInput);

                fieldsWrapper.appendChild(quantityField);

                const notesField = document.createElement('label');
                notesField.className = 'selected-products-item__field';

                const notesLabel = document.createElement('span');
                notesLabel.textContent = 'Notas';
                notesField.appendChild(notesLabel);

                const notesInput = document.createElement('textarea');
                notesInput.rows = 2;
                notesInput.maxLength = 240;
                notesInput.placeholder = 'Agrega detalles, medidas o preferencias';
                notesInput.value = sanitizeNotes(item.notes);
                notesInput.addEventListener('change', function() {
                    updateSelectionItem(item.id, { notes: notesInput.value }, { reRender: false, skipSummary: true });
                });
                notesField.appendChild(notesInput);

                fieldsWrapper.appendChild(notesField);

                listItem.appendChild(fieldsWrapper);
                fragment.appendChild(listItem);
            });

            list.appendChild(fragment);
            updateSelectionSummaryUI();
            updateProductSelectionButtons();
        }

        function updateSelectionSummaryUI() {
            const countElement = document.getElementById('selectedProductsCount');
            const summaryElement = document.getElementById('selectedProductsSummary');
            const clearButton = document.getElementById('clearSelectedProductsButton');
            const panel = document.getElementById('selectedProductsPanel');
            const toggle = document.getElementById('selectedPanelToggle');
            const checkoutButton = document.getElementById('checkoutButton');

            const validItems = selectedProducts.filter(item => productData[item.id]);
            const uniqueCount = validItems.length;
            const totalUnits = validItems.reduce((sum, item) => sum + sanitizeQuantity(item.quantity), 0);

            if (countElement) {
                countElement.textContent = String(uniqueCount);
            }

            if (summaryElement) {
                if (uniqueCount === 0) {
                    summaryElement.textContent = 'Carrito vac√≠o';
                } else if (uniqueCount === 1) {
                    summaryElement.textContent = totalUnits === 1
                        ? '1 producto en el carrito'
                        : `1 producto, ${totalUnits} unidades`;
                } else {
                    summaryElement.textContent = `${uniqueCount} productos, ${totalUnits} unidades`;
                }
            }

            if (clearButton) {
                clearButton.disabled = uniqueCount === 0;
            }

            if (checkoutButton) {
                checkoutButton.disabled = uniqueCount === 0;
            }

            if (panel) {
                panel.setAttribute('data-empty', uniqueCount === 0 ? 'true' : 'false');
            }

            if (toggle) {
                const expanded = toggle.getAttribute('aria-expanded') === 'true';
                const labelDescriptor = uniqueCount === 0
                    ? 'sin productos'
                    : `${uniqueCount} ${uniqueCount === 1 ? 'producto en el carrito' : 'productos en el carrito'}`;
                toggle.setAttribute('aria-label', `${expanded ? 'Cerrar' : 'Abrir'} carrito (${labelDescriptor})`);
            }
        }

        function updateProductSelectionButtons() {
            const buttons = document.querySelectorAll('.product-card__select');
            const selectedIds = new Set(selectedProducts.map(item => item.id));

            buttons.forEach(button => {
                const productId = button.getAttribute('data-product-id');

                if (!productId) {
                    return;
                }

                const isSelected = selectedIds.has(productId);
                button.setAttribute('aria-pressed', isSelected ? 'true' : 'false');
                button.textContent = isSelected ? '‚úî En el carrito' : '‚ûï A√±adir al carrito';
            });
        }

        function openSelectionPanel() {
            const panel = document.getElementById('selectedProductsPanel');
            const toggle = document.getElementById('selectedPanelToggle');

            if (!panel || !toggle) {
                return;
            }

            panel.classList.add('selected-products-panel--open');
            panel.setAttribute('aria-hidden', 'false');
            toggle.setAttribute('aria-expanded', 'true');
            updateSelectionSummaryUI();

            window.requestAnimationFrame(() => {
                if (typeof panel.focus === 'function') {
                    panel.focus({ preventScroll: true });
                }
            });
        }

        function closeSelectionPanel() {
            const panel = document.getElementById('selectedProductsPanel');
            const toggle = document.getElementById('selectedPanelToggle');

            if (!panel || !toggle) {
                return;
            }

            panel.classList.remove('selected-products-panel--open');
            panel.setAttribute('aria-hidden', 'true');
            toggle.setAttribute('aria-expanded', 'false');
            updateSelectionSummaryUI();
        }

        function getSelectedProductsDetails() {
            return selectedProducts
                .map(item => {
                    const product = productData[item.id];

                    if (!product) {
                        return null;
                    }

                    return {
                        id: item.id,
                        name: product.title || 'Producto Amazonia',
                        quantity: sanitizeQuantity(item.quantity),
                        notes: sanitizeNotes(item.notes)
                    };
                })
                .filter(Boolean);
        }

        window.addEventListener('storage', function(event) {
            if (event.key === selectionStorageKey) {
                restoreSelectionFromStorage();
                renderSelectedProductsList();
            }
        });

        function initializeCatalogState() {
            const categories = Array.from(document.querySelectorAll('.category'));
            const navWrapper = document.querySelector('.nav-container');
            const navButtonsContainer = document.getElementById('navButtons');
            const emptyMessage = document.getElementById('emptyCatalogMessage');

            const categoriesWithProducts = categories.filter(category =>
                category.querySelectorAll('.product-card').length > 0
            );

            const hasProducts = categoriesWithProducts.length > 0;

            if (navWrapper) {
                navWrapper.style.display = hasProducts ? '' : 'none';
            }

            if (emptyMessage) {
                emptyMessage.style.display = hasProducts ? 'none' : 'block';
            }

            if (hasProducts) {
                const firstCategory = categoriesWithProducts[0];
                const firstCategoryId = firstCategory ? firstCategory.id : null;

                categories.forEach(category => {
                    if (category) {
                        category.classList.toggle('active', category === firstCategory);
                    }
                });

                if (navButtonsContainer) {
                    const navButtons = Array.from(navButtonsContainer.querySelectorAll('.nav-btn'));
                    navButtons.forEach(button => {
                        if (!button.dataset || !firstCategoryId) {
                            button.classList.remove('active');
                            return;
                        }

                        button.classList.toggle('active', button.dataset.category === firstCategoryId);
                    });
                }
            }
        }

        function showCategory(event, categoryId) {
            const categories = Array.from(document.querySelectorAll('.category'));
            if (!categories.length) {
                return;
            }

            let requestedCategoryId = typeof categoryId === 'string' ? categoryId : '';

            categories.forEach(cat => cat.classList.remove('active'));

            let targetCategory = requestedCategoryId ? document.getElementById(requestedCategoryId) : null;
            if (!targetCategory) {
                targetCategory = categories[0] || null;
                requestedCategoryId = targetCategory ? targetCategory.id : requestedCategoryId;
            }

            if (targetCategory) {
                targetCategory.classList.add('active');
            }

            const buttons = Array.from(document.querySelectorAll('.nav-btn'));
            buttons.forEach(btn => btn.classList.remove('active'));
            const targetButton = (event && (event.currentTarget || event.target)) || (requestedCategoryId
                ? document.querySelector('[data-category="' + requestedCategoryId + '"]')
                : null);
            if (targetButton) {
                targetButton.classList.add('active');
            }

            const navContainer = document.querySelector('.nav-container');
            if (navContainer) {
                window.scrollTo({
                    top: navContainer.offsetTop - 20,
                    behavior: 'smooth'
                });
            }

            filterCatalog();
        }

        function openModal(productId) {
            const modal = document.getElementById('productModal');
            const product = productData[productId];

            if (!modal || !product) {
                return;
            }

            currentProduct = product.title;
            modalProduct = product;
            modalImages = Array.isArray(product.images)
                ? product.images
                    .map(image => (typeof image === 'string' ? image.trim() : ''))
                    .filter(image => image.length > 0)
                : [];
            currentImageIndex = 0;
            const titleEl = document.getElementById('modalTitle');
            const descriptionEl = document.getElementById('modalDescription');
            const specsList = document.getElementById('modalSpecs');

            if (titleEl) {
                titleEl.textContent = product.title;
            }

            if (descriptionEl) {
                descriptionEl.textContent = product.description;
            }

            if (specsList) {
                if (product.specs && product.specs.length) {
                    specsList.innerHTML = product.specs.map(spec =>
                        `<li><span>${spec[0]}:</span><span>${spec[1]}</span></li>`
                    ).join('');
                } else {
                    specsList.innerHTML = '<li><span>Informaci√≥n:</span><span>Disponible a solicitud</span></li>';
                }
            }

            updateModalImage();
            updateModalCarouselControls();

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            const modal = document.getElementById('productModal');
            if (modal) {
                modal.classList.remove('active');
            }
            document.body.style.overflow = 'auto';
            modalImages = [];
            modalProduct = null;
            currentProduct = null;
            currentImageIndex = 0;
            updateModalImage();
            updateModalCarouselControls();
        }

        function contactWhatsApp() {
            const config = catalogConfig || {};
            const whatsappNumber = (config.whatsapp || '').replace(/\D+/g, '');

            if (!whatsappNumber) {
                return;
            }

            const selectedDetails = getSelectedProductsDetails();
            let message = '';

            if (selectedDetails.length > 0) {
                const lines = selectedDetails.map((detail, index) => {
                    const notesPart = detail.notes ? ` - Notas: ${detail.notes}` : '';
                    return `${index + 1}. ${detail.name} - Cantidad: ${detail.quantity}${notesPart}`;
                }).join('\n');

                const totalUnits = selectedDetails.reduce((sum, detail) => sum + detail.quantity, 0);
                message = `Hola! Quiero finalizar mi compra con este pedido:

${lines}

Total de unidades: ${totalUnits}

¬øMe ayudas a completar la compra?`;
            } else {
                const productName = currentProduct || 'Producto Amazonia';
                message = `Hola! Me interesa el producto: ${productName}. ¬øPodr√≠amos avanzar con la compra?`;
            }

            const url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
        }

        function requestQuote() {
            const config = catalogConfig || {};
            const emailValue = (config.email || '').trim();

            if (!emailValue) {
                return;
            }

            const selectedDetails = getSelectedProductsDetails();
            const phoneLine = config.phone ? `Tel√©fono de contacto preferido: ${config.phone}` : 'Tel√©fono de contacto:';

            let subject = '';
            let body = '';

            if (selectedDetails.length > 0) {
                subject = selectedDetails.length === 1
                    ? `Cotizaci√≥n - ${selectedDetails[0].name}`
                    : `Cotizaci√≥n - ${selectedDetails.length} productos`;

                const productLines = selectedDetails.map(detail => {
                    const baseLine = `- ${detail.name} (Cantidad: ${detail.quantity})`;
                    return detail.notes
                        ? `${baseLine}\n  Notas: ${detail.notes}`
                        : baseLine;
                }).join('\n');

                const totalUnits = selectedDetails.reduce((sum, detail) => sum + detail.quantity, 0);

                body = [
                    'Hola,',
                    '',
                    'Me gustar√≠a recibir una cotizaci√≥n para los siguientes productos:',
                    '',
                    productLines,
                    '',
                    `Total de unidades solicitadas: ${totalUnits}`,
                    '',
                    phoneLine,
                    '',
                    'Gracias.'
                ].join('\n');
            } else {
                const productName = currentProduct || 'Producto Amazonia';
                subject = `Cotizaci√≥n - ${productName}`;
                body = [
                    'Hola,',
                    '',
                    `Me gustar√≠a recibir una cotizaci√≥n para el producto: ${productName}.`,
                    '',
                    phoneLine,
                    'Cantidad requerida:',
                    '',
                    'Gracias!'
                ].join('\n');
            }

            const url = `mailto:${emailValue}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.location.href = url;
        }

        window.addEventListener('scroll', function() {
            const scrolled = window.pageYOffset;
            const header = document.querySelector('header');
            if (header && scrolled < 300) {
                header.style.transform = `translateY(${scrolled * 0.5}px)`;
            }
        });
    </script>
</body>
</html>